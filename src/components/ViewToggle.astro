---
// View toggle between Interactive and Printable view
---

<div class="fixed bottom-4 left-1/2 -translate-x-1/2 md:bottom-auto md:top-6 md:left-6 md:translate-x-0 z-50 no-print">
  <nav class="flex bg-white dark:bg-slate-800 rounded-full shadow-md border border-gray-200 dark:border-slate-700 p-1" role="navigation" aria-label="View mode toggle">
    <button
      id="view-interactive"
      class="view-toggle-btn px-3 py-1.5 md:px-4 md:py-2 rounded-full text-[10px] md:text-xs font-bold uppercase transition-all bg-gray-900 text-white dark:bg-white dark:text-gray-900 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2"
      data-view="interactive"
      aria-pressed="true"
      type="button"
    >
      Interactive
    </button>
    <button
      id="view-printable"
      class="view-toggle-btn px-3 py-1.5 md:px-4 md:py-2 rounded-full text-[10px] md:text-xs font-bold uppercase transition-all text-gray-600 dark:text-slate-400 hover:text-gray-900 dark:hover:text-white focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2"
      data-view="printable"
      aria-pressed="false"
      type="button"
    >
      Printable
    </button>
  </nav>
</div>

<script>
  const STORAGE_KEY = 'cv-view-mode';

  function setView(mode: 'interactive' | 'printable') {
    const printableView = document.getElementById('classic-view');
    const interactiveView = document.getElementById('portfolio-view');
    const interactiveBtn = document.getElementById('view-interactive');
    const printableBtn = document.getElementById('view-printable');

    if (mode === 'interactive') {
      printableView?.classList.add('hidden');
      interactiveView?.classList.remove('hidden');
      document.body.classList.add('portfolio-mode');

      interactiveBtn?.classList.add('bg-gray-900', 'text-white', 'dark:bg-white', 'dark:text-gray-900');
      interactiveBtn?.classList.remove('text-gray-600', 'dark:text-slate-400');
      interactiveBtn?.setAttribute('aria-pressed', 'true');

      printableBtn?.classList.remove('bg-gray-900', 'text-white', 'dark:bg-white', 'dark:text-gray-900');
      printableBtn?.classList.add('text-gray-600', 'dark:text-slate-400');
      printableBtn?.setAttribute('aria-pressed', 'false');
    } else {
      printableView?.classList.remove('hidden');
      interactiveView?.classList.add('hidden');
      document.body.classList.remove('portfolio-mode');

      interactiveBtn?.classList.remove('bg-gray-900', 'text-white', 'dark:bg-white', 'dark:text-gray-900');
      interactiveBtn?.classList.add('text-gray-600', 'dark:text-slate-400');
      interactiveBtn?.setAttribute('aria-pressed', 'false');

      printableBtn?.classList.add('bg-gray-900', 'text-white', 'dark:bg-white', 'dark:text-gray-900');
      printableBtn?.classList.remove('text-gray-600', 'dark:text-slate-400');
      printableBtn?.setAttribute('aria-pressed', 'true');
    }

    localStorage.setItem(STORAGE_KEY, mode);
  }

  // Initialize - default to interactive view
  document.addEventListener('DOMContentLoaded', () => {
    const saved = localStorage.getItem(STORAGE_KEY) as 'interactive' | 'printable' | null;
    // Default to interactive if no saved preference
    setView(saved || 'interactive');

    document.querySelectorAll('.view-toggle-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        const view = (btn as HTMLElement).dataset.view as 'interactive' | 'printable';
        setView(view);
      });
    });
  });
</script>
